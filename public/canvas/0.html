<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="/libs/zepto.js"></script>
    <style>
    body {
        background-color: lime;
    }
    #container {
        border: 1px solid #999;
    }
    </style>
    <title>canvas挖空</title>
</head>
<body>
    <canvas id="container" width="500" height="500"></canvas>
<script>
$(function () {
    var canvas = document.getElementById("container");
    var context = canvas.getContext("2d");
    // 透明矩形
    // text
    context.font = '24px Helvetica';
    context.fillText('Click anywhere to test', 75, 200);

    // 透明背景
    context.fillStyle = 'rgba(0, 0, 0, 0.5)';
    context.fillRect(0, 0, canvas.width, canvas.height);
    context.fill();

    // 边框 椭圆
    context.lineWidth = '7';
    context.strokeStyle = '#fff';
    context.ellipse(130, 80, 100, 50, 0, 0, Math.PI * 2, false);
    context.closePath();
    context.stroke();
    // 挖空 椭圆
    context.globalCompositeOperation = 'destination-out';
    context.fillStyle = 'rgba(255, 255, 255, 1)';
    context.beginPath();
    context.ellipse(130, 80, 100, 50, 0, 0, Math.PI * 2, false);
    context.fill();

    context.globalCompositeOperation = 'source-over';
    // image
    var image = new Image();
    image.onload = function () {
        context.drawImage(image, 200, 200);
    }
    image.src = '/img/1.jpg'

    context.canvas.onmousedown = function (e) {
       context.clearRect(0, 0, canvas.width, canvas.height);
    };
})
</script>
</body>
</html>
